{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://project2/./src/constants.js","webpack://project2/./src/listeners.js","webpack://project2/./src/render.js","webpack://project2/./src/services.js","webpack://project2/./src/state.js","webpack://project2/webpack/bootstrap","webpack://project2/webpack/runtime/define property getters","webpack://project2/webpack/runtime/hasOwnProperty shorthand","webpack://project2/webpack/runtime/make namespace object","webpack://project2/./src/chats.js"],"sourcesContent":["export const SERVER = {\r\n  AUTH_MISSING: \"auth-missing\",\r\n  AUTH_INSUFFICIENT: \"auth-insufficient\",\r\n  REQUIRED_USERNAME: \"required-username\",\r\n  REQUIRED_MESSAGE: \"required-message\",\r\n  MESSAGE_MISSING: \"noSuchId\",\r\n};\r\n\r\nexport const CLIENT = {\r\n  NETWORK_ERROR: \"networkError\",\r\n  NO_SESSION: \"noSession\",\r\n};\r\n\r\nexport const MESSAGES = {\r\n  [CLIENT.NETWORK_ERROR]:\r\n    \"Trouble connecting to the network.  Please try again\",\r\n  [SERVER.AUTH_INSUFFICIENT]:\r\n    \"Your username/password combination does not match any records, please try again.\",\r\n  [SERVER.REQUIRED_USERNAME]:\r\n    \"Please enter a valid (letters and/or numbers) username\",\r\n  [SERVER.REQUIRED_MESSAGE]: \"Please enter your message\",\r\n  default: \"Something went wrong.  Please try again\",\r\n};\r\n","import {\r\n  fetchLogin,\r\n  fetchLogout,\r\n  fetchChats,\r\n  fetchAddChat,\r\n  fetchUsers,\r\n} from \"./services\";\r\n\r\nimport state, {\r\n  waitOnChats,\r\n  waitOnLogin,\r\n  setChats,\r\n  setError,\r\n  login,\r\n  logout,\r\n  addChat,\r\n  setUsers,\r\n  waitOnActiveUserList,\r\n} from \"./state\";\r\n\r\nimport render from \"./render\";\r\nconst appEl = document.querySelector(\"#app\");\r\nlet pollingInterval;\r\n\r\nexport function startPolling() {\r\n  pollingInterval = setTimeout(() => {\r\n    checkNewChat();\r\n    startPolling();\r\n  }, 5000);\r\n}\r\n\r\nfunction stopPolling() {\r\n  clearTimeout(pollingInterval);\r\n}\r\n\r\nfunction checkNewChat() {\r\n  waitOnActiveUserList();\r\n  fetchUsers()\r\n    .then((users) => {\r\n      setUsers(users);\r\n\r\n      render({ state, appEl });\r\n\r\n      return fetchChats();\r\n    })\r\n    .catch((err) => {\r\n      setError(err?.error || \"ERROR\");\r\n      render({ state, appEl });\r\n    })\r\n    .then((chats) => {\r\n      setChats(chats);\r\n\r\n      render({ state, appEl });\r\n    })\r\n    .catch((err) => {\r\n      setError(err?.error || \"ERROR\");\r\n      render({ state, appEl });\r\n    });\r\n}\r\n\r\nexport function addAbilityToLogin({ state, appEl }) {\r\n  appEl.addEventListener(\"submit\", (e) => {\r\n    if (!e.target.classList.contains(\"login__form\")) {\r\n      return;\r\n    }\r\n    e.preventDefault();\r\n\r\n    const username = appEl.querySelector(\".login__username\").value;\r\n    const userList = appEl.querySelector(\".user_list\");\r\n    waitOnLogin();\r\n    render({ state, appEl });\r\n    fetchLogin(username)\r\n      .then((chats) => {\r\n        login(username);\r\n        setChats(chats);\r\n        return fetchUsers();\r\n      })\r\n      .catch((err) => {\r\n        setError(err?.error || \"ERROR\");\r\n        render({ state, appEl });\r\n      })\r\n      .then((users) => {\r\n        setUsers(users);\r\n\r\n        render({ state, appEl });\r\n        startPolling();\r\n      })\r\n      .catch((err) => {\r\n        setError(err?.error || \"ERROR\");\r\n        render({ state, appEl });\r\n      });\r\n  });\r\n}\r\n\r\nexport function addAbilityToLogout({ state, appEl }) {\r\n  appEl.addEventListener(\"click\", (e) => {\r\n    if (!e.target.classList.contains(\"controls__logout\")) {\r\n      return;\r\n    }\r\n    logout();\r\n    render({ state, appEl });\r\n    fetchLogout()\r\n      .then(() => {\r\n        return fetchUsers();\r\n      })\r\n      .catch((err) => {\r\n        setError(err?.error || \"ERROR\");\r\n        render({ state, appEl });\r\n      })\r\n      .then((users) => {\r\n        setUsers(users);\r\n        stopPolling();\r\n      })\r\n      .catch((err) => {\r\n        setError(err?.error || \"ERROR\");\r\n        render({ state, appEl });\r\n      });\r\n  });\r\n}\r\n\r\nexport function addAbilityToRefresh({ state, appEl }) {\r\n  appEl.addEventListener(\"click\", (e) => {\r\n    if (!e.target.classList.contains(\"controls__refresh\")) {\r\n      return;\r\n    }\r\n    waitOnChats();\r\n    render({ state, appEl });\r\n    fetchChats()\r\n      .then((chats) => {\r\n        setChats(chats);\r\n        render({ state, appEl });\r\n      })\r\n      .catch((err) => {\r\n        setError(err?.error || \"ERROR\");\r\n        render({ state, appEl });\r\n      });\r\n  });\r\n}\r\n\r\nexport function addAbilityToAddChat({ state, appEl }) {\r\n  appEl.addEventListener(\"submit\", (e) => {\r\n    if (!e.target.classList.contains(\"add__form\")) {\r\n      return;\r\n    }\r\n    const message = appEl.querySelector(\".add__message\").value;\r\n\r\n    fetchAddChat(message)\r\n      .then((chat) => {\r\n        addChat(chat, chat.id);\r\n        render({ state, appEl });\r\n      })\r\n      .catch((err) => {\r\n        setError(err?.error || \"ERROR\");\r\n        render({ state, appEl });\r\n      });\r\n  });\r\n}\r\n","function render({ state, appEl }) {\r\n  const html = `\r\n     <main class=\"\">\r\n      <p class=\"heading\">Chat Application</p>\r\n       ${generateStatusHtml(state)}\r\n       ${generateLoginHtml(state)}\r\n       ${generateContentHtml(state)}\r\n     </main>\r\n    `;\r\n  appEl.innerHTML = html;\r\n}\r\n\r\nfunction generateStatusHtml(state) {\r\n  return `\r\n        <div class=\"status\">${state.error}</div>\r\n    `;\r\n}\r\n\r\nfunction generateLoginHtml(state) {\r\n  if (state.isLoginPending) {\r\n    return `\r\n        <div class=\"login__waiting\">Loading user...</div>\r\n      `;\r\n  }\r\n  if (state.isLoggedIn) {\r\n    return ``;\r\n  }\r\n  return `\r\n        <div class=\"login\">\r\n          <form class=\"login__form\" action=\"#/login\">\r\n            <label>\r\n              <input class=\"login__username\" value=\"\" placeholder=\"Username\">\r\n            </label>\r\n            <button class=\"login__button\" type=\"submit\">Login</button>\r\n          </form>\r\n        </div>\r\n    `;\r\n}\r\n\r\nfunction generateContentHtml(state) {\r\n  if (!state.isLoggedIn) {\r\n    return ``;\r\n  }\r\n  if (state.isChatPending) {\r\n    return `\r\n      <div class=\"content\">\r\n        ${generateControlsHtml(state)}\r\n        <div class=\"chats__waiting\">Loading Chats...</div>\r\n      </div>\r\n    `;\r\n  }\r\n  return `\r\n      <div class=\"content\">\r\n        ${generateControlsHtml(state)}\r\n        <div class=\"chat__area\">\r\n          <ul class=\"chats\">${generateChatsHtml(state)}</ul>\r\n          ${generateAddChatHtml(state)}\r\n        </div>\r\n      </div>\r\n  `;\r\n}\r\n\r\nfunction generateControlsHtml(state) {\r\n  return `\r\n    <div class=\"controls\">\r\n     \r\n      <button class=\"controls__refresh\">Refresh</button>\r\n      <button class=\"controls__logout\">Logout</button>\r\n      <p class=\"login-caption\">Logged in as: ${state.username}</p>\r\n      <div class=\"user_list\">\r\n      \r\n      ${state.isLoginPending===true ? `<div class=\"login__waiting\">Loading user...</div>`:  state.users\r\n      ? state.users\r\n          .map((user) => `<p class=\"active_user\">${user}</p>`)\r\n          .join(\"\")\r\n      : \"no users\" }\r\n      </div>\r\n    </div>\r\n  `;\r\n}\r\n\r\nfunction generateChatsHtml(state) {\r\n  const chatsHtml =\r\n    Object.values(state.chats)\r\n      .map((chat) => {\r\n        const isAddedClass =\r\n          state.lastAddedChatId === chat.id ? \"chat__text--added\" : \"\";\r\n        return `\r\n      <li class=\"chat\">\r\n          <span>\r\n            ${chat.username} :  ${chat.message}\r\n          </span>\r\n      </li>\r\n      `;\r\n      })\r\n      .join(\"\") || `<p>No chats yet, add your message!</p>`;\r\n  return chatsHtml;\r\n}\r\n\r\nfunction generateAddChatHtml(state) {\r\n  return `\r\n        <form class=\"add__form\" action=\"#/add\">\r\n        <input class=\"add__message\" placeholder=\"Enter your message...\">\r\n        <button type=\"submit\" id=\"send-button\" class=\"add__button\">Send</button>\r\n        </form>\r\n  `;\r\n}\r\n\r\nexport default render;\r\n","export function fetchSession() {\r\n  return fetch(\"/api/session\", {\r\n    method: \"GET\",\r\n  })\r\n    .catch(() => Promise.reject({ error: \"networkError\" }))\r\n    .then((response) => {\r\n      if (response.ok) {\r\n        return response.json();\r\n      }\r\n      return response\r\n        .json()\r\n        .catch((error) => Promise.reject({ error }))\r\n        .then((err) => Promise.reject(err));\r\n    });\r\n}\r\n\r\nexport function fetchLogin(username) {\r\n  return fetch(\"/api/session\", {\r\n    method: \"POST\",\r\n    headers: new Headers({\r\n      \"content-type\": \"application/json\",\r\n    }),\r\n    body: JSON.stringify({ username }),\r\n  })\r\n    .catch(() => Promise.reject({ error: \"networkError\" }))\r\n    .then((response) => {\r\n      if (response.ok) {\r\n        return response.json();\r\n      }\r\n      return response\r\n        .json()\r\n        .catch((error) => Promise.reject({ error }))\r\n        .then((err) => Promise.reject(err));\r\n    });\r\n}\r\n\r\nexport function fetchLogout() {\r\n  return fetch(\"/api/session\", {\r\n    method: \"DELETE\",\r\n  })\r\n    .catch(() => Promise.reject({ error: \"networkError\" }))\r\n    .then((response) => {\r\n      if (response.ok) {\r\n        return response.json();\r\n      }\r\n      return response\r\n        .json()\r\n        .catch((error) => Promise.reject({ error }))\r\n        .then((err) => Promise.reject(err));\r\n    });\r\n}\r\n\r\nexport function fetchAddChat(message) {\r\n  \r\n  return fetch(\"/api/chats\", {\r\n    method: \"POST\",\r\n    headers: new Headers({\r\n      \"content-type\": \"application/json\",\r\n    }),\r\n    body: JSON.stringify({ message }),\r\n  })\r\n    .catch(() => Promise.reject({ error: \"networkError\" }))\r\n    .then((response) => {\r\n      if (response.ok) {\r\n        return response.json();\r\n      }\r\n      return response\r\n        .json()\r\n        .catch((error) => Promise.reject({ error }))\r\n        .then((err) => Promise.reject(err));\r\n    });\r\n}\r\n\r\nexport function fetchChats() {\r\n  return fetch(\"/api/chats\", {\r\n    method: \"GET\",\r\n  })\r\n    .catch(() => Promise.reject({ error: \"networkError\" }))\r\n    .then((response) => {\r\n      if (response.ok) {\r\n        return response.json();\r\n      }\r\n      return response\r\n        .json()\r\n        .catch((error) => Promise.reject({ error }))\r\n        .then((err) => Promise.reject(err));\r\n    });\r\n}\r\n\r\nexport function fetchUsers() {\r\n  return fetch(\"/api/users\", {\r\n    method: \"GET\",\r\n  })\r\n    .catch(() => Promise.reject({ error: \"networkError\" }))\r\n    .then((response) => {\r\n      if (response.ok) {\r\n        return response.json();\r\n      }\r\n      return response\r\n        .json()\r\n        .catch((error) => Promise.reject({ error }))\r\n        .then((err) => Promise.reject(err));\r\n    });\r\n}\r\n","import { MESSAGES } from \"./constants\";\r\n\r\nconst state = {\r\n  chats: {},\r\n  isLoggedIn: false,\r\n  isLoginPending: true,\r\n  isChatPending: false,\r\n  username: \"\",\r\n  lastAddedChatId: \"\",\r\n  error: \"\",\r\n  users: [],\r\n  \r\n};\r\n\r\nexport function waitOnLogin() {\r\n  state.isLoggedIn = false;\r\n  state.isLoginPending = true;\r\n  state.username = \"\";\r\n  state.chats = {};\r\n  state.error = \"\";\r\n}\r\nexport function waitOnActiveUserList() {\r\n  state.isLoginPending = true;\r\n}\r\n\r\n\r\nexport function login(username) {\r\n  state.isLoggedIn = true;\r\n  state.isLoginPending = false;\r\n  state.username = username;\r\n  state.error = \"\";\r\n  state.lastAddedChatId = \"\";\r\n}\r\n\r\nexport function logout() {\r\n  state.isLoggedIn = false;\r\n  state.isLoginPending = false;\r\n  state.username = \"\";\r\n  state.chats = {};\r\n  state.error = \"\";\r\n}\r\n\r\nexport function waitOnChats() {\r\n  state.chats = {};\r\n  state.isChatPending = true;\r\n  state.error = \"\";\r\n}\r\n\r\nexport function setChats(chats) {\r\n  state.chats = chats;\r\n  state.isChatPending = false;\r\n  state.error = \"\";\r\n  state.lastAddedChatId = \"\";\r\n}\r\n\r\nexport function addChat(chat, id) {\r\n  state.chats = chat;\r\n  state.lastAddedChatId = id;\r\n  state.error = \"\";\r\n}\r\n\r\nexport function setError(error) {\r\n  if (!error) {\r\n    state.error = \"\";\r\n    return;\r\n  }\r\n  state.isLoginPending = false;\r\n  state.error = MESSAGES[error] || MESSAGES.default;\r\n}\r\n\r\nexport function setUsers(users) {\r\n  state.users = users;\r\n  state.isLoginPending=false;\r\n}\r\n\r\nexport default state;\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { SERVER, CLIENT } from \"./constants\";\r\n\r\nimport state, { login, logout, setChats, setError } from \"./state\";\r\n\r\nimport { fetchSession, fetchChats } from \"./services\";\r\nimport render from \"./render\";\r\nimport {\r\n  addAbilityToLogin,\r\n  addAbilityToLogout,\r\n  addAbilityToRefresh,\r\n  addAbilityToAddChat,\r\n} from \"./listeners\";\r\n\r\nimport { startPolling } from \"./listeners\";\r\n\r\nconst appEl = document.querySelector(\"#app\");\r\nrender({ state, appEl });\r\naddAbilityToLogin({ state, appEl });\r\naddAbilityToLogout({ state, appEl });\r\naddAbilityToRefresh({ state, appEl });\r\naddAbilityToAddChat({ state, appEl });\r\ncheckForSession();\r\n\r\nfunction checkForSession() {\r\n  \r\n  fetchSession()\r\n    .then((session) => {\r\n      login(session.username);\r\n      render({ state, appEl });\r\n      return fetchChats();\r\n    })\r\n    .catch((err) => {\r\n      if (err?.error === SERVER.AUTH_MISSING) {\r\n        return Promise.reject({ error: CLIENT.NO_SESSION });\r\n      }\r\n      return Promise.reject(err);\r\n    })\r\n    .then((chats) => {\r\n      setChats(chats);\r\n      render({ state, appEl });\r\n      startPolling();\r\n    })\r\n    .catch((err) => {\r\n      if (err?.error == CLIENT.NO_SESSION) {\r\n        logout();\r\n        render({ state, appEl });\r\n        return;\r\n      }\r\n\r\n      setError(err?.error || \"ERROR\");\r\n      render({ state, appEl });\r\n    });\r\n}\r\n"],"names":["SERVER","AUTH_MISSING","AUTH_INSUFFICIENT","REQUIRED_USERNAME","REQUIRED_MESSAGE","MESSAGE_MISSING","CLIENT","NETWORK_ERROR","NO_SESSION","MESSAGES","_defineProperty","fetchLogin","fetchLogout","fetchChats","fetchAddChat","fetchUsers","state","waitOnChats","waitOnLogin","setChats","setError","login","logout","addChat","setUsers","waitOnActiveUserList","render","appEl","document","querySelector","pollingInterval","startPolling","setTimeout","checkNewChat","stopPolling","clearTimeout","then","users","err","error","chats","addAbilityToLogin","_ref","addEventListener","e","target","classList","contains","preventDefault","username","value","userList","addAbilityToLogout","_ref2","addAbilityToRefresh","_ref3","addAbilityToAddChat","_ref4","message","chat","id","html","concat","generateStatusHtml","generateLoginHtml","generateContentHtml","innerHTML","isLoginPending","isLoggedIn","isChatPending","generateControlsHtml","generateChatsHtml","generateAddChatHtml","map","user","join","chatsHtml","Object","values","isAddedClass","lastAddedChatId","fetchSession","fetch","method","Promise","reject","response","ok","json","headers","Headers","body","JSON","stringify","checkForSession","session"],"sourceRoot":""}